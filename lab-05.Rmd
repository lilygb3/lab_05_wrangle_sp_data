---
title: "Lab 05 - La Quinta is Spanish for next to Denny's, Pt. 2"
author: "Lily Botha"
date: "02/17/2026"
output: github_document
---

### Load packages and data

```{r load-packages, message = FALSE}
library(tidyverse) 
library(dsbox) 
library(readr)
```

```{r load-data, message = FALSE}
states <- read_csv("data/states.csv")
dn <- read_csv("https://github.com/DataScience4Psych/DataScience4Psych/raw/main/data/raw-data/dennys.csv")
lq <- read_csv("https://github.com/DataScience4Psych/DataScience4Psych/raw/main/data/raw-data/laquinta.csv")
```

### Exercise 1

There are 3 Denny's locations in Alaska. 

```{r dn-ak}
dn_ak <- dn %>%
  filter(state == "AK")
nrow(dn_ak)
```

There are 2 La Quinta locations in Alaska. 

```{r lq-ak}
lq_ak <- lq %>% 
  filter(state == "AK")
nrow(lq_ak)
```

### Exercise 2

There are 6 pairings between all Denny's and all La Quinta locations in Alaska, so we need to calculate 6 distances. 

```{r dn-lq-ak-pairings}
nrow(dn_ak) * nrow(lq_ak)
```

### Exercise 3

```{r join-dn-ak-lq-ak}
dn_lq_ak <- full_join(dn_ak, lq_ak, #use full_join to keep all rows and columns from both dfs
  by = "state"
)
dn_lq_ak
```

### Exercise 4

There are 6 observations in the joined dn_lq_ak data frame. The names of the variables are: address.x, city.x, state, zip.x, longitude.x, latitude.x, address.y, city.y, zip.y, longitude.y, and latitude.y. 

```{r summary-dn-lq-ak}
nrow(dn_lq_ak)
colnames(dn_lq_ak)
```

### Exercise 5

The mutate function is used to add a new variable to a data frame while keeping the existing variables. 

```{r load-haversine}
haversine <- function(long1, lat1, long2, lat2, round = 3) {
  # convert to radians
  long1 <- long1 * pi / 180
  lat1 <- lat1 * pi / 180
  long2 <- long2 * pi / 180
  lat2 <- lat2 * pi / 180

  R <- 6371 # Earth mean radius in km

  a <- sin((lat2 - lat1) / 2)^2 + cos(lat1) * cos(lat2) * sin((long2 - long1) / 2)^2
  d <- R * 2 * asin(sqrt(a))

  return(round(d, round)) # distance in km
}
```

### Exercise 6

```{r calc-dn-lq-ak-distance}
dn_lq_ak <- dn_lq_ak %>%
  mutate(distance = haversine(long1 = longitude.x, lat1 = latitude.x, long2 = longitude.y, lat2 = latitude.y)) #add a distance variable using the haversine function
```

### Exercise 7***

```{r min-dist}
dn_lq_ak_min_dist <- dn_lq_ak %>% 
  group_by(address.x) %>% #group by Denny's locations
  mutate(distance = haversine(longitude.x, latitude.x, longitude.y, latitude.y)) %>% #calc minimum distance btwn a Denny's and La Quinta for each Denny's location. NTS: can just type the variables, don't need to add "long1 = ..."
  arrange(distance)
```


### Exercise 8

```{r}
dn_lq_ak_min_dist %>% 
  ggplot()
```



### Exercise 9




### Exercise 10




### Exercise 11





### Exercise 12













